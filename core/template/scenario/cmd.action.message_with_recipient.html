<div class="input-group input-group-sm" style="width: 100%">
    <span class="input-group-addon roundedLeft" style="width: 100px">Destinataire</span>
    <input class="expressionAttr form-control input-sm roundedRight" data-l1key="options" data-l2key="recipient"
        value="#recipient#" data-cmd_id="#id#" data-uid="#uid#" />
</div>

<div class="input-group input-group-sm" style="width: 100%">
    <span class="input-group-addon roundedLeft" style="width: 100px">#title_placeholder#</span>
    <input class="title expressionAttr form-control input-sm roundedRight" data-l1key="options" data-l2key="title"
        value="#title#" data-cmd_id="#id#" data-uid="#uid#" />
</div>

<div class="input-group input-group-sm" style="width: 100%; padding-top: 1px">
    <span class="input-group-addon roundedLeft" style="width: 100px">#message_placeholder#</span>
    <textarea class="message expressionAttr form-control ta_autosize" data-l1key="options" data-l2key="message" rows="1"
        style="resize:vertical;" data-cmd_id="#id#" data-uid="#uid#">#message#</textarea>
    <span class="input-group-addon hasBtn roundedRight">
        <button class="btn btn-default roundedRight listCmdMessage" type="button" tooltip="{{SÃ©lectionner la commande}}"
            data-cmd_id="#id#" data-uid="#uid#"><i class="fas fa-list-alt"></i></button>
    </span>
</div>

<script>

    // remove #recipient# is not set yet
    if ('#recipient#' == '#' + 'recipient#') {
        $('.expressionAttr[data-l1key=options][data-l2key=recipient][data-uid=#uid#]').val('');
    }

    $('.listCmdMessage[data-uid=#uid#]').on('click', function () {
        if ('#message_cmd_subtype#' != '') {
            jeedom.cmd.getSelectModal({ cmd: { type: '#message_cmd_type#', subType: '#message_cmd_subtype#' } }, function (result) {
                $('.expressionAttr[data-l1key=options][data-l2key=message][data-uid=#uid#]').atCaret('insert', result.human);
            });
        } else {
            jeedom.cmd.getSelectModal({ cmd: { type: '#message_cmd_type#' } }, function (result) {
                $('.expressionAttr[data-l1key=options][data-l2key=message][data-uid=#uid#]').atCaret('insert', result.human);
            });
        }
    });
</script>